<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Campus Lost & Found</title>
  <style>
    :root {
  --primary: #6366f1;
  --secondary: #22c55e;
  --danger: #ef4444;
  --bg1: #eef2ff;
  --bg2: #f0fdf4;
  --glass: rgba(255, 255, 255, 0.75);
  --border: rgba(255, 255, 255, 0.35);
  --dark: #0f172a;
  --muted: #64748b;
}

* {
  box-sizing: border-box;
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Inter', system-ui, sans-serif;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  padding: 24px;
  color: var(--dark);
}

/* ---------- HEADINGS ---------- */
h1 {
  text-align: center;
  font-size: clamp(2rem, 5vw, 2.6rem);
  margin-bottom: 6px;
  background: linear-gradient(90deg, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

h2 {
  margin: 0 0 12px;
}

/* ---------- LAYOUT ---------- */
.container {
  max-width: 1050px;
  margin: auto;
}

/* ---------- GLASS CARD ---------- */
.card {
  background: var(--glass);
  backdrop-filter: blur(14px);
  border: 1px solid var(--border);
  border-radius: 22px;
  padding: 26px;
  margin-bottom: 26px;
  box-shadow: 0 30px 60px rgba(0,0,0,0.12);
  transition: transform .25s ease, box-shadow .25s ease;
}

.card:hover {
  transform: translateY(-3px);
  box-shadow: 0 45px 90px rgba(0,0,0,0.18);
}

/* ---------- FORM ---------- */
label {
  margin-top: 14px;
  display: block;
  font-weight: 600;
  font-size: .85rem;
  color: var(--muted);
}

input, textarea, select {
  width: 100%;
  margin-top: 6px;
  padding: 13px 15px;
  border-radius: 14px;
  border: 1px solid #e5e7eb;
  font-size: .95rem;
  transition: all .25s ease;
}

input:focus,
textarea:focus,
select:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(99,102,241,.25);
  outline: none;
}

textarea {
  min-height: 100px;
  resize: vertical;
}

/* ---------- BUTTONS ---------- */
button {
  margin-top: 18px;
  width: 100%;
  padding: 14px;
  border-radius: 16px;
  border: none;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  color: white;
  background: linear-gradient(90deg, var(--primary), #818cf8);
  box-shadow: 0 12px 30px rgba(99,102,241,.4);
  transition: all .25s ease;
}

button:hover {
  transform: translateY(-2px) scale(1.01);
  box-shadow: 0 18px 40px rgba(99,102,241,.55);
}

button:active {
  transform: scale(.97);
}

/* ---------- ITEMS GRID ---------- */
.items {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 22px;
}

/* ---------- ITEM CARD ---------- */
.item {
  background: white;
  border-radius: 20px;
  padding: 20px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 18px 40px rgba(0,0,0,.08);
  transition: all .25s ease;
}

.item:hover {
  transform: translateY(-4px);
  box-shadow: 0 30px 65px rgba(0,0,0,.15);
}

.item h3 {
  margin: 10px 0 6px;
  font-size: 1.15rem;
}

.item p {
  margin: 4px 0;
  font-size: .9rem;
  color: var(--muted);
}

/* ---------- BADGES ---------- */
.badge {
  display: inline-block;
  padding: 6px 16px;
  font-size: .7rem;
  font-weight: 700;
  border-radius: 999px;
  letter-spacing: .6px;
}

.lost {
  background: rgba(239,68,68,.15);
  color: #b91c1c;
}

.found {
  background: rgba(34,197,94,.15);
  color: #166534;
}

/* ---------- CHAT ---------- */
.message {
  margin: 10px 0;
}

.user-message {
  text-align: right;
}

.user-message .bubble {
  display: inline-block;
  padding: 12px 16px;
  background: linear-gradient(135deg,#667eea,#764ba2);
  color: white;
  border-radius: 18px 18px 4px 18px;
  max-width: 80%;
}

.bot-message .bubble {
  display: inline-block;
  padding: 12px 16px;
  background: white;
  border-radius: 18px 18px 18px 4px;
  max-width: 80%;
  box-shadow: 0 4px 15px rgba(0,0,0,.12);
}

/* ---------- TYPING DOTS ---------- */
.typing span {
  width: 6px;
  height: 6px;
  background: var(--primary);
  display: inline-block;
  border-radius: 50%;
  margin: 0 3px;
  animation: bounce 1.4s infinite ease-in-out;
}

@keyframes bounce {
  0%,80%,100% { transform: translateY(0); }
  40% { transform: translateY(-6px); }
}

/* ---------- MOBILE ---------- */
@media(max-width:600px){
  body { padding: 16px; }
  #chatPopup {
    width: 92vw !important;
    height: 75vh !important;
  }
}
input,
textarea,
select {
  color: #0f172a;   /* FORCE visible text */
  background: #fff;
}
.bot-message .bubble {
  color: #0f172a !important;
  font-size: 0.95rem;
  line-height: 1.4;
}
/* üî• FIX CHAT INPUT BAR ISSUE */
#chatPopup button {
  width: auto !important;
  margin-top: 0 !important;
  padding: 10px 18px;
  flex-shrink: 0;
}

#chatPopup input {
  margin-top: 0 !important;
}




  </style>
</head>
<body>
  <div class="container">
    <h1>üéí Campus Lost & Found</h1>

    <div class="card">
      <h2>Report Lost / Found Item</h2>
      <label>Type</label>
      <select id="type">
        <option value="lost">Lost</option>
        <option value="found">Found</option>
      </select>

      <label>Item Name</label>
      <input id="itemName" placeholder="e.g. Black Wallet" />

      <label>Location</label>
      <input id="location" placeholder="e.g. Physics Lab" />

      <label>Description</label>
      <textarea id="description" placeholder="Any identifying details..."></textarea>

      <button onclick="addItem()">Submit</button>
    </div>

    <div class="card">
      <h2>All Reports</h2>
      <div id="items" class="items"></div>
    </div>
  </div>
  <!-- FLOATING CHAT BOT ICON -->
<button id="chatToggle" style="
position:fixed;
bottom:20px;
right:20px;
z-index:999;
width:60px;
height:60px;
border-radius:50%;
border:none;
background:linear-gradient(135deg,#667eea,#764ba2);
color:white;
font-size:26px;
cursor:pointer;
box-shadow:0 8px 20px rgba(0,0,0,0.3);
"> üí¨ </button>

<!-- CHAT BOT POPUP -->
<div id="chatPopup" style="
display:none;
position:fixed;
bottom:90px;
right:20px;
z-index:999;
width:560px;
height:630px;
background:#fff;
border-radius:20px;
box-shadow:0 10px 40px rgba(0,0,0,0.3);
overflow:hidden;
display:flex;
flex-direction:column;
">



  <div style="
background:linear-gradient(135deg,#667eea,#764ba2);
color:white;
padding:14px;
text-align:center;
font-weight:600;
"> ‚ú® Chat Assistant </div>

  <div id="messages" style="
flex:1;
overflow-y:auto;
padding:12px;
background:#f8f9fa;
"></div>

  <div style="
display:flex;
align-items:center;
padding:10px;
border-top:1px solid #351fa4;
gap:10px;
background:#fff;
">

   <input id="userInput" placeholder="Type or speak..." style="flex:1;padding:10px;border-radius:20px;border:1px solid #ccc;outline:none;" onkeypress="handleKeyPress(event)">

<button id="sendBtn" onclick="sendMessage()" style="padding:10px 16px;border:none;border-radius:20px;background:#667eea;color:white;"> Send </button>


  </div>

</div>

  <script>
    const itemsDiv = document.getElementById('items');
    let reports = JSON.parse(localStorage.getItem('reports')) || [];

    function render() {
      itemsDiv.innerHTML = '';
      reports.forEach((r, index) => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <span class="badge ${r.type}">${r.type.toUpperCase()}</span>
          <h3>${r.item}</h3>
          <p><strong>Location:</strong> ${r.location}</p>
          <p>${r.desc}</p>
          <button onclick="removeItem(${index})">Mark Resolved</button>
        `;
        itemsDiv.appendChild(div);
      });
    }

    function addItem() {
      const type = document.getElementById('type').value;
      const item = document.getElementById('itemName').value;
      const location = document.getElementById('location').value;
      const desc = document.getElementById('description').value;

      if (!item || !location) {
        alert('Please fill required fields');
        return;
      }

      reports.unshift({ type, item, location, desc });
      localStorage.setItem('reports', JSON.stringify(reports));
      render();

      document.getElementById('itemName').value = '';
      document.getElementById('location').value = '';
      document.getElementById('description').value = '';
    }

    function removeItem(index) {
      reports.splice(index, 1);
      localStorage.setItem('reports', JSON.stringify(reports));
      render();
    }

    render();
     const API_KEY = "AIzaSyAaPUdZ2zbV87Ui0OxzHyGPg2ty7TinnNI";     //ENTER YOUR API KEY

const chatToggle = document.getElementById("chatToggle");
const chatPopup  = document.getElementById("chatPopup");
const messages   = document.getElementById("messages");

chatToggle.onclick = () => {
  chatPopup.style.display =
    chatPopup.style.display === "none" ? "flex" : "none";
};

function handleKeyPress(e){
  if(e.key==="Enter") sendMessage();
}

async function sendMessage(){
  const input=document.getElementById("userInput");
  const btn=document.getElementById("sendBtn");
  if(!input.value.trim()) return;

  addMsg(input.value,"user");
  const text=input.value;
  input.value = "";
input.focus();
btn.disabled = true;


  const typing=document.createElement("div");
  typing.className="bot-message";
  typing.innerHTML=`<div class="bubble typing">
    <span></span><span></span><span></span>
  </div>`;
  messages.appendChild(typing);
  messages.scrollTop=messages.scrollHeight;

  try{
    const res=await fetch(
      `https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent?key=${API_KEY}`,
      {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({
          contents:[{ parts:[{ text:text }] }]
        })
      }
    );
    const data=await res.json();
    typing.remove();
    addMsg(data.candidates[0].content.parts[0].text,"bot");
  }catch{
    typing.remove();
    addMsg("Network error ‚ùå","bot");
  }finally{
    btn.disabled=false;
  }
}

function addMsg(text,type){
  const div=document.createElement("div");
  div.className=`message ${type}-message`;
  div.innerHTML=`<div class="bubble">${escapeHtml(text)}</div>`;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
}

function escapeHtml(t){
  const d=document.createElement("div");
  d.textContent=t;
  return d.innerHTML;
}

const userInput = document.getElementById("userInput");
const sendBtn   = document.getElementById("sendBtn");

/* ENTER KEY FIX */
userInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

/* BUTTON CLICK */
sendBtn.addEventListener("click", sendMessage);



  </script>
</body>
</html>